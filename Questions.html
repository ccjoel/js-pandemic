<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>

  <style type="text/css">
   p {
       padding: 0px 0px 0px 15px;
   }
   #question {
       border: 1px solid gray;
   }
   div {
       padding: 15px 15px 15px 15px;
       border: 1px solid blue;
   }
  </style>
  <title> by ICS</title>

  <script type='text/javascript'>//<![CDATA[
    $(function() {
        // You may use: https://developer.mozilla.org if you need help with syntax
        // https://getfirebug.com/firebug-lite-debug.js as external resource for a build-in console window

        function primes(start, end) {
            const n = end + 1;

            const sieve = new Array(n).fill(true)

            for (let x = 2; x <= Math.sqrt(n); x++) {
                if (sieve[x]) {
                    for (let y = Math.pow(x, 2); y <= n; y += x) {
                        sieve[y] = false;
                    }
                }
            }

            return sieve.reduce((acc, isPrime, index) => {
                return (isPrime && index >= start && index > 1) ? [...acc, index] : acc;
            }, []);

        }

        function Q1(number1, number2) {
            var returnValue = "";

            returnValue = primes(number1, number2);

            return returnValue.join(' ');
        }

        /**
         * Given number, returns if it palindrome
         **/
        function isPalindrome(num) {
            const asString = num + '';

            const reversed = asString
                .split('')
                .reverse()
                .join('');

            return asString === reversed;
        }

        function Q2(number1) {
            var returnValue = "";

            /* 1000000 number of digits */
            /* 2^32 -1 */ /* most likely biggest js number */

            const biggestJsNumber = 1000000; // assumption

            // TODO validate input, validate output
            for (let counter = number1 + 1; counter < biggestJsNumber; counter++) {
                if (isPalindrome(counter)) {
                    return counter;
                }
            }

            return returnValue;
        }

        /**
         * Given 'a', and 'aaab', returns 3
         * Given 'a', and 'abb', returns 1
         * Given 'a', and 'b', returns 0
         * Given 'a', and 'b', returns 0
         **/
        function scanRepeated(character, str) {
            const re = new RegExp(`${character}+`);
            const result = str.match(re);

            return result ? result[0].length : 0;
        }

        function Q3(string1) {
            let accumulator = '';
            let index = 0;

            while (index < string1.length) {
                const currentChar = string1[index];
                const occurrences = scanRepeated(currentChar, string1.substring(index));
                const displayCount = occurrences === 1 ? '' : occurrences;

                accumulator += currentChar + displayCount;
                index += occurrences;
            }

            return accumulator;
        }

        function formatCount(repeatCounter, previous) {
            const count = repeatCounter > 1 ? repeatCounter : '';
            return previous + count;
        }

        /**
         * Look behind / previous - no love.
         **/
        function Q3_orig(string1) {
            /* const sampleInput = 'aaabaaaaccaaaaba'; */

            let accumulator = '';

            for (
                let index = 0,
                    previous = string1[0],
                    repeatCounter = 0;
                index < string1.length;
                index++
            ) {
                let current = string1[index];

                if (index === string1.length - 1) {
                    let addition = current;
                    if (previous === current) {
                        repeatCounter++;
                        addition = '';
                    }
                    accumulator += formatCount(repeatCounter, previous);
                    accumulator += addition;
                } else if (current === previous) {
                    repeatCounter++;
                } else {
                    accumulator += formatCount(repeatCounter, previous);
                    repeatCounter = 1;
                    previous = current;
                }
            }
            return accumulator;
        }

        // look ahead insted of look behind
        function Q3_ahead(string1) {

            let accumulator = '';

            for (
                let index = 0,
                    repeatCounter = 0;
                index < string1.length;
                index++
            ) {
                repeatCounter++;
                const current = string1[index];
                const next = string1[index + 1];

                if (current !== next) {
                    const displayCount = repeatCounter === 1 ? '' : repeatCounter;
                    accumulator += current + displayCount;
                    repeatCounter = 0;
                }
            }
            return accumulator;
        }

        function Q3_regex(string1) {
            return string1.replace(/(.)\1+/g, function(match, first){
                return first + match.length;
            });
        }

        function newLine(selector) {
            $(selector).append(document.createElement('br'));
        }
        $("#results1").append(Q1(1, 10));
        newLine("#results1");
        $("#results1").append(Q1(3, 23));

        $("#results2").append(Q2(907008));

        $("#results3").append(Q3("aaabaaaaccaaaaba"));
        newLine("#results3");
        $("#results3").append(Q3_regex("aaabaaaaccaaaaba"));
        newLine("#results3");
        $("#results3").append(Q3_ahead("aabcba"));
        newLine("#results3");
        $("#results3").append(Q3_orig("aaaa"));

    });//]]>

    </script>

</head>

<body>
  <!--don't edit this file-->
<div id=question>
  <span style="font-weight:bold">Question 1:</span> Generate all prime numbers between two given numbers.
  The two numbers are parameters that can be passed into the function. A prime number is one that is only
  divisible by 1 and itself. Output the results into the results element below.
  <p>
    Example:
    <br/> Primes between 1 and 10
    <br/> Output:
    <br/> 2
    <br/> 3
    <br/> 5
    <br/> 7
    <br/>
  </p>
</div>
<br/>
<p>Your Results:</p>
<div id="results1"></div>
<br/>
<div id=question>
<span style="font-weight:bold">Question 2:</span> A positive integer is called a palindrome if its
representation in the decimal system is the same when read from left to right and from right to left.
For a given positive integer K of not more than 1000000 digits, write the value of the smallest
palindrome larger than K to output. Numbers are always displayed without leading zeros.
  <P>
    Example:
    <br/> Number Given: 808
    <br/> Output: 818
    <br/> Number Given: 2133
    <br/> Output: 2222
    <br/>
  </P>
</div>
<br/>
<p>Your Results:</p>
<div id="results2"></div>
<br/>
<div id="question">
  <span style="font-weight:bold">Question 3:</span> Write a simple string compression algorithm.
  If a character [ch] occurs n>1 times in a row, then it will be represented by [ch][n].
  <P>
    Example:
    <br/> String Given: aaaa
    <br/> Output: a4
    <br/>
    <br/> String Given: aaabaaaaccaaaaba
    <br/> Output: a3ba4c2a4ba
    <br/>
    <br/> String Given: abcd
    <br/> Output: abcd
    <br/>
  </P>
</div>
<br/>
<p>Your Results:</p>
<div id="results3"></div>
</body>

</html>
